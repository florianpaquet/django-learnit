{% extends "django_learnit/base.html" %}
{% load i18n static %}

{% block head %}
<style>
{% for class, display, color in classes_colors %}
  .token[data-label="{{ class }}"] {
    border-color: {{ color }} !important;
  }

  [data-label="{{ class }}"] > .legend {
    background: {{ color }} !important;
  }
{% endfor %}
</style>
{% endblock head %}

{% block breadcrumb %}
<ol class="breadcrumb">
  <li><a href="{% url 'django_learnit:learning-model-list' %}">django-learnit</a></li>
  <li><a href="{% url 'django_learnit:learning-model-detail' name=learning_model_name %}">{{ learning_model.get_verbose_name }}</a></li>
  <li class="active">{% trans "Labelling" %} #{{ document.pk }}</li>
</ol>
{% endblock breadcrumb %}


{% block body %}

<div class="main">

  <div class="left">
    <!-- details -->
    <h4 class="bordered">{{ learning_model.get_verbose_name }}</h4>
    <small>{{ learning_model.description|default:_("No description") }}</small>
    <!-- ./details -->

    <!-- classes legend -->
    <h4 class="bordered">{% trans "Classes" %}</h4>
    <ul class="class-legend">
    {% for class, display, color in classes_colors %}
      <li data-label="{{ class }}"><div class="legend"></div>{{ display }}</li>
    {% endfor %}
    </ul>
    <!-- ./classes legend -->
  </div>

  <div class="right">

    <h4 class="bordered">Document #{{ document.pk }}</h4>

    <!-- tokens -->
    <div class="tokens">
    {% for token in tokens %}
      <span class="token" data-index="{{ forloop.counter0 }}">
        {{ token }}
        <div class="legend"></div>
      </span>
    {% endfor %}
    </div>
    <!-- ./tokens -->

    <form method="post">
      {% csrf_token %}
      {% for label_form in form %}
        {{ label_form.label.as_hidden }}
      {% endfor %}
      {{ form.management_form }}
      <input class="btn btn-primary" type="submit" value="{% trans 'Save and next' %}">
    </form>

  </div>

</div>

<!-- classes dropdown -->
<ul class="classes">
  {% for class, display in classes %}
    <li data-label="{{ class }}">
      {{ display }}
      <div class="legend"></div>
    </li>
  {% endfor %}
</ul>
<!-- ./classes dropdown -->

{% endblock body %}

{% block script %}
<script src="{% static 'django_learnit/js/ner-labelling.js' %}"></script>
{% endblock script %}
